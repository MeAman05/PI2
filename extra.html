<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Кто хочет стать миллионером — передача данных</title>

<style>
body{
  margin:0;
  font-family:Inter, sans-serif;
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  padding:12px;
  background-image:url('https://cdn2.softswiss.net/duxcasino/b/evolution/Millionaire.jpg');
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;
  background-attachment:fixed;
  transition: background-image 1s ease-in-out;
}

.card{
  background:rgba(28,28,28,0.85);
  border-radius:12px;
  padding:20px;
  max-width:600px;
  width:100%;
  box-shadow:0 4px 16px rgba(0,0,0,0.7);
  text-align:center;
}

h1{
  margin:0 0 12px;
  font-size:20px;
  text-align:center;
}

.options{
  display:flex;
  flex-direction:column;
  gap:12px;
  margin-top:20px;
}

.option{
  background:#58738e;
  padding:12px;
  border-radius:8px;
  cursor:pointer;
  opacity:0;
  transition:0.3s;
}

.option:hover{ background:#3498db; }

.result{
  margin-top:16px;
  padding:10px;
  border-radius:6px;
  font-weight:bold;
}

.correct{ background:#16a34a; color:#000; }
.wrong{ background:#d92d2d; color:#fff; }

.scoreboard{
  margin-top:12px;
  padding:10px;
  border-radius:6px;
  background:rgba(15,52,96,0.85);
}

button{
  margin-top:20px;
  padding:10px 14px;
  border:none;
  border-radius:8px;
  color:#fff;
  background:#3498db;
  cursor:pointer;
  transition:0.3s;
}

button:hover{
  background:#d0560f;
}

#timer{
  font-size:20px;
  color:#fff;
  margin-bottom:10px;
}

/* Модальное окно */
.modal{
  display:none;
  position:fixed;
  z-index:9999;
  left:0;
  top:0;
  width:100%;
  height:100%;
  background:rgba(0,0,0,0.8);
  justify-content:center;
  align-items:center;
}

.modal-content{
  background:rgba(30,30,30,0.95);
  padding:15px;
  border-radius:12px;
  width:90%;
  max-width:700px;
  animation:fadeIn 0.4s;
  position:relative;
  box-shadow:0 0 25px rgba(0,0,0,0.9);
}

.close{
  color:#fff;
  font-size:28px;
  position:absolute;
  top:10px;
  right:15px;
  cursor:pointer;
}

.close:hover{ color:#ff5555; }

.modal-content video{
  width:100%;
  height:auto;
  max-height:400px;
  border-radius:10px;
  background:#000;
}

@keyframes fadeIn{
  from{opacity:0; transform:scale(0.8);}
  to{opacity:1; transform:scale(1);}
}
</style>
</head>

<body>

<div class="card" id="gameCard"></div>

<!-- Кнопка перехода на другую страницу -->
<div style="position: fixed; bottom: 20px; left: 0; width: 100%; display: flex; justify-content: center;">
  <button onclick="window.location.href='extra.html'">Перейти на другую страницу</button>
</div>

<!-- Кнопка видео -->
<div style="position: fixed; bottom: 80px; left: 0; width: 100%; display:flex; justify-content:center;">
  <button onclick="openVideo()">Видео-подсказка</button>
</div>

<!-- МОДАЛЬНОЕ ОКНО С ВИДЕО -->
<div id="videoModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeVideo()">&times;</span>
    <video id="videoPlayer" controls>
      <source id="videoSource" src="FILE 2025-11-21 12:26:49.mp4" type="video/mp4">
      Ваш браузер не поддерживает воспроизведение видео.
    </video>
  </div>
</div>

<script>
const allQuestions = [
  {q:'Что такое IP?', options:['Протокол передачи файлов','Адрес устройства в сети','Служба почты','Устройство маршрутизации'], answer:1},
  {q:'HTTP используется для?', options:['Передачи веб-страниц','Отправки почты','Создания VPN','Коммутатор сети'], answer:0},
  {q:'FTP это?', options:['Протокол передачи файлов','Протокол отправки почты','Проверка доступности узла','Защищённое соединение'], answer:0},
  {q:'SMTP служит для?', options:['Проверки пакетов','Отправки почты','Шифрования данных','Создания сокета'], answer:1},
  {q:'TCP обеспечивает?', options:['Быструю передачу без контроля ошибок','Надёжную передачу данных','Пропускную способность сети','Адресацию'], answer:1},
  {q:'UDP обеспечивает?', options:['Быструю передачу без контроля ошибок','Надёжную передачу данных','Проверку DNS','Маршрутизацию'], answer:0},
  {q:'DNS это?', options:['Служба преобразования имени в IP','Протокол HTTP','Протокол FTP','Протокол SMTP'], answer:0},
  {q:'LAN это?', options:['Локальная сеть','Глобальная сеть','Сокет','Виртуальная сеть'], answer:0}
];

let remainingQuestions = [];
let currentQuestion;
let score = 0;
let askedCorrect = 0;
let countdownTimer;
const maxQuestions = 6;
const gameCard = document.getElementById("gameCard");

/* ----- Видео ----- */
function openVideo(){
  const modal = document.getElementById("videoModal");
  const video = document.getElementById("videoPlayer");
  modal.style.display = "flex";
  // старт с начала каждый раз
  video.currentTime = 0;
  video.play().catch(()=>{});
}

function closeVideo(){
  const modal = document.getElementById("videoModal");
  const video = document.getElementById("videoPlayer");
  video.pause();
  modal.style.display = "none";
}

/* ----- Игра ----- */
function startGame(){
  remainingQuestions = allQuestions.slice();
  score = 0;
  askedCorrect = 0;
  renderNextQuestion();
}

function startTimer(){
  let timeLeft = 30;
  const timerDiv = document.createElement("div");
  timerDiv.id = "timer";
  gameCard.appendChild(timerDiv);

  countdownTimer = setInterval(()=>{
    timerDiv.textContent = "Осталось времени: " + timeLeft + " сек";
    if(timeLeft <= 0){
      clearInterval(countdownTimer);
      gameCard.innerHTML = '<h1>Время вышло!</h1><p>Ваши баллы: '+score+'</p><button onclick="startGame()">Начать заново</button>';
    }
    timeLeft--;
  },1000);
}

function renderNextQuestion(){
  if(askedCorrect >= maxQuestions){
    gameCard.innerHTML = '<h1>Поздравляем! Вы победили!</h1><p>Ваши баллы: '+score+'</p><button onclick="startGame()">Играть заново</button>';
    return;
  }
  if(remainingQuestions.length === 0){
    gameCard.innerHTML = '<h1>Вопросы закончились!</h1><p>Ваши баллы: '+score+'</p><button onclick="startGame()">Играть заново</button>';
    return;
  }

  let idx = Math.floor(Math.random() * remainingQuestions.length);
  currentQuestion = remainingQuestions[idx];

  renderQuestion(currentQuestion);
  startTimer();
}

function renderQuestion(q){
  gameCard.innerHTML = '';

  const h1 = document.createElement("h1");
  h1.textContent = q.q;
  gameCard.appendChild(h1);

  const options = document.createElement("div");
  options.className = "options";

  q.options.forEach((opt,i)=>{
    const btn = document.createElement("div");
    btn.className = "option";
    btn.textContent = opt;
    btn.onclick = ()=>checkAnswer(i);
    options.appendChild(btn);
  });

  gameCard.appendChild(options);

  const scoreDiv = document.createElement("div");
  scoreDiv.className = "scoreboard";
  scoreDiv.textContent = "Баллы: " + score;
  gameCard.appendChild(scoreDiv);

  const feedback = document.createElement("div");
  feedback.id = "feedback";
  feedback.className = "result";
  feedback.hidden = true;
  gameCard.appendChild(feedback);

  setTimeout(()=>{
    options.querySelectorAll(".option").forEach((o,i)=>{
      o.style.transition="opacity .4s";
      setTimeout(()=> o.style.opacity=1, i*150);
    });
  },100);
}

function checkAnswer(i){
  clearInterval(countdownTimer);
  const options = gameCard.querySelectorAll(".option");
  const fb = document.getElementById("feedback");

  if(i === currentQuestion.answer){
    options[i].style.background="#16a34a";
    fb.textContent="Правильно!";
    fb.className="result correct";
    fb.hidden=false;

    score+=1000;
    askedCorrect++;
    remainingQuestions.splice(remainingQuestions.indexOf(currentQuestion),1);

    setTimeout(()=>{
      renderNextQuestion();
    },700);
  } else {
    options[i].style.background="#b32323";
    options[currentQuestion.answer].style.background="#16a34a";

    fb.textContent="Неправильно!";
    fb.className="result wrong";
    fb.hidden=false;

    remainingQuestions.splice(remainingQuestions.indexOf(currentQuestion),1);

    setTimeout(()=>{
      startGame();
    },1200);
  }
}

startGame();
</script>

</body>
</html>
